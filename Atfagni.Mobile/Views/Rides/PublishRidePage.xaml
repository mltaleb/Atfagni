<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Atfagni.Mobile.ViewModels.Rides"
             x:DataType="vm:PublishRideViewModel"
             x:Class="Atfagni.Mobile.Views.Rides.PublishRidePage"
             Title="Publier un trajet"
             BackgroundColor="#F5F5F5">
    <!-- Fond gris pro -->

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- 1. CARTE TRAJET (DÃ©part / ArrivÃ©e) -->
            <Border Stroke="Transparent" StrokeShape="RoundRectangle 15" BackgroundColor="White" Padding="15">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,5"/>
                </Border.Shadow>

                <Grid RowDefinitions="Auto, Auto, Auto" ColumnDefinitions="40, *" RowSpacing="10">
                    <!-- Icones visuelles -->
                    <Label Grid.Row="0" Grid.Column="0" Text="ðŸŸ¢" VerticalOptions="Center" HorizontalOptions="Center" FontSize="12"/>
                    <BoxView Grid.Row="1" Grid.Column="0" WidthRequest="1" Color="LightGray" VerticalOptions="Fill" HorizontalOptions="Center"/>
                    <Label Grid.Row="2" Grid.Column="0" Text="ðŸ”´" VerticalOptions="Center" HorizontalOptions="Center" FontSize="12"/>

                    <!-- Champs de saisie -->
                    <Entry Grid.Row="0" Grid.Column="1" Placeholder="Lieu de dÃ©part (ex: Tindouf)" 
                           Text="{Binding StartLocation}" FontAttributes="Bold" PlaceholderColor="Gray"/>

                    <BoxView Grid.Row="1" Grid.Column="1" HeightRequest="1" Color="#F0F0F0"/>

                    <Entry Grid.Row="2" Grid.Column="1" Placeholder="Lieu d'arrivÃ©e (ex: Madrid)" 
                           Text="{Binding EndLocation}" FontAttributes="Bold" PlaceholderColor="Gray"/>
                </Grid>
            </Border>

            <!-- 2. DATE ET HEURE -->
            <Border Stroke="Transparent" StrokeShape="RoundRectangle 15" BackgroundColor="White" Padding="15">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,5"/>
                </Border.Shadow>
                <Grid ColumnDefinitions="*,*">
                    <VerticalStackLayout Grid.Column="0" Spacing="5">
                        <Label Text="DATE" FontSize="10" TextColor="Gray" FontAttributes="Bold"/>
                        <DatePicker Date="{Binding DepartureDate}" Format="dd/MM/yyyy" TextColor="#2196F3" FontAttributes="Bold"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Column="1" Spacing="5">
                        <Label Text="HEURE" FontSize="10" TextColor="Gray" FontAttributes="Bold"/>
                        <TimePicker Time="{Binding DepartureTime}" Format="HH:mm" TextColor="#2196F3" FontAttributes="Bold"/>
                    </VerticalStackLayout>
                </Grid>
            </Border>

            <!-- 3. CONFIGURATION (Passagers & Colis) -->
            <Label Text="OPTIONS DU VOYAGE" FontSize="12" FontAttributes="Bold" TextColor="Gray" Margin="5,10,0,0"/>

            <!-- Option Passagers -->
            <Border Stroke="Transparent" StrokeShape="RoundRectangle 15" BackgroundColor="White" Padding="15">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,5"/>
                </Border.Shadow>
                <VerticalStackLayout Spacing="10">
                    <Grid ColumnDefinitions="*, Auto">
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸ‘¤" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Accepter des passagers" VerticalOptions="Center" FontAttributes="Bold"/>
                        </HorizontalStackLayout>
                        <Switch Grid.Column="1" IsToggled="{Binding AcceptsPassengers}" OnColor="#2196F3"/>
                    </Grid>

                    <!-- DÃ©tails (Visible si activÃ©) -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15" IsVisible="{Binding AcceptsPassengers}">
                        <VerticalStackLayout>
                            <Label Text="PRIX / PLACE (DA/â‚¬)" FontSize="10" TextColor="Gray"/>
                            <Entry Text="{Binding PricePerSeat}" Keyboard="Numeric" Placeholder="0" HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1">
                            <Label Text="PLACES DISPO" FontSize="10" TextColor="Gray"/>
                            <Entry Text="{Binding TotalSeats}" Keyboard="Numeric" Placeholder="4" HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Option Colis -->
            <Border Stroke="Transparent" StrokeShape="RoundRectangle 15" BackgroundColor="White" Padding="15">
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,5"/>
                </Border.Shadow>
                <VerticalStackLayout Spacing="10">
                    <Grid ColumnDefinitions="*, Auto">
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸ“¦" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Accepter des colis" VerticalOptions="Center" FontAttributes="Bold"/>
                        </HorizontalStackLayout>
                        <Switch Grid.Column="1" IsToggled="{Binding AcceptsPackages}" OnColor="#2196F3"/>
                    </Grid>

                    <!-- DÃ©tails (Visible si activÃ©) -->
                    <VerticalStackLayout Spacing="10" IsVisible="{Binding ShowPackageOptions}">
                        <BoxView HeightRequest="1" Color="#F0F0F0"/>
                        <Grid ColumnDefinitions="*, 2*">
                            <VerticalStackLayout>
                                <Label Text="PRIX MOYEN" FontSize="10" TextColor="Gray"/>
                                <Entry Text="{Binding PricePerPackage}" Keyboard="Numeric" Placeholder="ex: 1000"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1" Margin="10,0,0,0">
                                <Label Text="DESCRIPTION / LIMITES" FontSize="10" TextColor="Gray"/>
                                <Entry Text="{Binding PackageDescription}" Placeholder="ex: Max 20kg, pas de frigo"/>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- BOUTON D'ACTION -->
            <Button Text="PUBLIER MAINTENANT" 
                    Command="{Binding PublishCommand}" 
                    BackgroundColor="#2196F3" 
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    HeightRequest="50"
                    Margin="0,10,0,30">
                <Button.Shadow>
                    <Shadow Brush="#2196F3" Opacity="0.4" Radius="10" Offset="0,5"/>
                </Button.Shadow>
            </Button>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>